{% load static %}

<!DOCTYPE html>
<html>
<head>
  <title>NC Bike/Pedestrian Counts</title>
  <meta charset="utf-8" />
  <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=yes" />
  <link rel="stylesheet" href="{% static 'base/styles.css' %}">
  <link href="https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.css" rel="stylesheet" />
  <link href="https://unpkg.com/@mapbox/mapbox-gl-geocoder@4.7.0/dist/mapbox-gl-geocoder.css" rel="stylesheet" />
  
  
</head>
<body>
  <div class="header">
    <h1>North Carolina Bike and Pedestrian Counts</h1>
    <p id="text">Double click counters for detailed analysis</p>
    
    <div class="search-container">
      <div class="search-wrapper">
        <input type="text" id="searchBar" placeholder="Search for counters, addresses, or locations...">
        <button class="search-clear" id="searchClear">&times;</button>
        <div class="search-results" id="searchResults"></div>
      </div>
    </div>
  </div>
  
  <div id="map"></div>
  <div id="counterInfo" class="counter-info"></div>
  
  <!-- Loading Overlay -->
  <div class="loading-overlay" id="loadingOverlay">
    <div class="loading-content">
      <div class="loading-spinner"></div>
      <div class="loading-text">Downloading data. Please wait...</div>
    </div>
  </div>
  
  <!-- Download Controls -->
  <div class="download-container">
    <div class="download-options" id="downloadOptions">
      <div class="download-option" data-format="json">
        <div>
          <div class="download-option-title">JSON Format</div>
        </div>
      </div>
      <div class="download-option" data-format="csv">
        <div>
          <div class="download-option-title">CSV Format</div>
        </div>
      </div>
    </div>
    <button class="download-btn" id="downloadBtn">
      <span></span>
      <span>Download Counters Metadata</span>
    </button>

    <button class="download-btn" id="downloadCountsBtn" style="display: none;">
      <span></span>
      <span>Download Counts / Datastreams</span>
    </button>
  </div>
  
  <script src="https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.js"></script>
  <script src="https://unpkg.com/@mapbox/mapbox-gl-geocoder@4.7.0/dist/mapbox-gl-geocoder.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@turf/turf@6/turf.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
  <script src="{% static 'base/script.js' %}"></script>
  
</body>
</html>